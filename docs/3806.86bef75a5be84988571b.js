"use strict";(self.webpackChunkion_holla_messenger=self.webpackChunkion_holla_messenger||[]).push([[3806],{3806:(Ye,H,f)=>{f.r(H),f.d(H,{MessagePageModule:()=>Ue});var q=f(8583),R=f(6378),D=f(4762),Q=f(3679),K=f(4353),X=f.n(K),j=f(663),k=f.n(j),ee=f(6185),te=f(4080),ie=f(9285),ae=f(9959),G=f(5527),se=f(1902);const ne=(0,f(8384).fo)("Network",{web:()=>f.e(5182).then(f.bind(f,5182)).then(n=>new n.NetworkWeb)});var T=f(2773),e=f(3018),S=f(4490),$=f(7635),re=f(887),le=f(393),ce=f(4368),de=f(4333);let ue=(()=>{class n{constructor(t){this.localStorageService=t}cacheFeedDateWrite(t,i,a){t&&(this.localStorageService.removeItem(i+"_uid_"+a),this.localStorageService.setItem(i+"_uid_"+a,t))}cacheFeedDateRead(t,i){return this.localStorageService.getItem(t+"_uid_"+i)}setTimeCacheWritefeed(t,i,a){return this.localStorageService.getItem("setTime_"+i+"_uid_"+a)||this.localStorageService.setItem("setTime_"+i+"_uid_"+a,t),this.localStorageService.getItem("setTime_"+i+"_uid_"+a)}realNowSetTime(){var t=new Date;return t.toLocaleTimeString(),t.toLocaleString(),Math.round(t.getTime()/1e3)}realSetTimeNexty(t){var i=new Date;return i.setSeconds(i.getSeconds()+t),i.toLocaleTimeString(),i.toLocaleString(),Math.round(i.getTime()/1e3)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG($.n))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var he=f(4540);function me(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"div",22),e._UZ(2,"ion-icon",23),e._UZ(3,"br"),e.TgZ(4,"p",24),e._uU(5),e.ALo(6,"translate"),e._UZ(7,"br"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"ion-button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().tryloginx()}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA()}2&n&&(e.xp6(5),e.hij("\n",e.lcZ(6,3,"messenger.noconnetmobiles")," "),e.xp6(3),e.hij("\n",e.lcZ(9,5,"messenger.nomobileconnetss"),"\n"),e.xp6(3),e.hij("\n",e.lcZ(12,7,"messenger.countimes"),"\n"))}function ge(n,g){1&n&&(e.TgZ(0,"div",21),e.TgZ(1,"div",22),e._UZ(2,"ion-icon",26),e._UZ(3,"br"),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"ion-progress-bar",27),e.qZA(),e.qZA()),2&n&&(e.xp6(5),e.hij("\n",e.lcZ(6,1,"messenger.sycingdata"),"\n"))}function pe(n,g){1&n&&(e.TgZ(0,"div",21),e.TgZ(1,"div",22),e._UZ(2,"ion-icon",28),e._UZ(3,"br"),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"translate"),e._UZ(7,"br"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"ion-progress-bar",27),e.qZA(),e.qZA()),2&n&&(e.xp6(5),e.hij("\n",e.lcZ(6,2,"messenger.offlinemode"),""),e.xp6(3),e.hij("\n",e.lcZ(9,4,"messenger.reconntetted"),"\n"))}function fe(n,g){if(1&n&&e._UZ(0,"img",33),2&n){const t=e.oxw(2);e.MGl("id","userphotos",t.uuuserid,"")}}function _e(n,g){if(1&n&&e._UZ(0,"img",34),2&n){const t=e.oxw(2);e.MGl("id","userphotos",t.uuuserid,""),e.s9C("src",t.userphotos,e.LSH)}}function ve(n,g){if(1&n&&(e.TgZ(0,"ion-avatar",29),e.YNc(1,fe,1,1,"img",30),e.YNc(2,_e,1,2,"img",31),e._UZ(3,"ion-icon",32),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","none"==t.userphotos),e.xp6(1),e.Q6J("ngIf","none"!=t.userphotos),e.xp6(1),e.Q6J("color",t.serveractivestats?"success":"danger")}}function ye(n,g){1&n&&(e.TgZ(0,"ion-title"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"login_app_name")))}function Se(n,g){1&n&&(e.TgZ(0,"ion-title"),e._UZ(1,"ion-icon",35),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"messenger.serverconnecting"),""))}function De(n,g){1&n&&(e.TgZ(0,"ion-title"),e._UZ(1,"ion-icon",35),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"messenger.serverconnecterror"),""))}function xe(n,g){1&n&&e._UZ(0,"ion-progress-bar",36)}function Te(n,g){if(1&n&&e._UZ(0,"img",33),2&n){const t=e.oxw().$implicit;e.MGl("id","messagephoto",t.userid,"")}}function Ie(n,g){if(1&n&&e._UZ(0,"img",34),2&n){const t=e.oxw().$implicit;e.MGl("id","messagephotos",t.userid,""),e.s9C("src",t.photo,e.LSH)}}function be(n,g){if(1&n&&(e.TgZ(0,"div",48),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.MGl("id","messagecontes",t.userid,""),e.xp6(1),e.Oqu(t.message)}}function Me(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item-sliding"),e.TgZ(1,"ion-item",37),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().messageDetail(o)}),e.TgZ(2,"ion-avatar",38),e.YNc(3,Te,1,1,"img",30),e.YNc(4,Ie,1,2,"img",31),e.TgZ(5,"div",39),e._UZ(6,"div",40),e.qZA(),e.qZA(),e.TgZ(7,"ion-label"),e.TgZ(8,"h2",41),e._uU(9),e.qZA(),e.TgZ(10,"div",42),e.YNc(11,be,2,2,"div",43),e.qZA(),e.qZA(),e._UZ(12,"div",44),e.qZA(),e.TgZ(13,"ion-item-options",45),e.TgZ(14,"ion-item-option",46),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().deletechats(o)}),e._UZ(15,"ion-icon",47),e.TgZ(16,"ion-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=g.$implicit,i=e.oxw();e.Udp("display",t&&t.message?"":"none"),e.xp6(1),e.Tol(t.userid==i.activeitems?"sactived":"nosapassif"),e.xp6(2),e.Q6J("ngIf","none"==t.photo),e.xp6(1),e.Q6J("ngIf","none"!=t.photo),e.xp6(2),e.MGl("id","xisonly",t.userid,""),e.xp6(2),e.MGl("id","messagename",t.userid,""),e.xp6(1),e.Oqu(t.fullName),e.xp6(2),e.Q6J("ngIf",t.message),e.xp6(1),e.Udp("display",t.messageLook?"block":"none"),e.MGl("id","messageLooks",t.userid,""),e.xp6(5),e.hij("\n",e.lcZ(18,14,"general.delete"),"\n")}}function we(n,g){if(1&n&&e._UZ(0,"img",33),2&n){const t=e.oxw(2).$implicit;e.MGl("id","messagephoto2",t.userid,"")}}function ke(n,g){if(1&n&&e._UZ(0,"img",34),2&n){const t=e.oxw(2).$implicit;e.MGl("id","messagephotos2",t.userid,""),e.s9C("src",t.photo,e.LSH)}}function Ce(n,g){if(1&n&&(e.TgZ(0,"div",48),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.MGl("id","messagedesc2",t.userid,""),e.xp6(1),e.Oqu(t.desc_status)}}function Ze(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).messageDetail(a)}),e.TgZ(1,"ion-avatar",38),e.YNc(2,we,1,1,"img",30),e.YNc(3,ke,1,2,"img",31),e.TgZ(4,"div",39),e._UZ(5,"div",40),e.qZA(),e.qZA(),e.TgZ(6,"ion-label"),e.TgZ(7,"h2",41),e._uU(8),e.qZA(),e.TgZ(9,"div",42),e.YNc(10,Ce,2,2,"div",43),e.qZA(),e.qZA(),e._UZ(11,"div",52),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Tol(t.userid==i.activeitems?"sactived":"nosapassif"),e.Udp("display",t?"":"none"),e.xp6(2),e.Q6J("ngIf","none"==t.photo),e.xp6(1),e.Q6J("ngIf","none"!=t.photo),e.xp6(2),e.MGl("id","isonly",t.userid,""),e.xp6(2),e.MGl("id","messagename2",t.userid,""),e.xp6(1),e.Oqu(t.fullName),e.xp6(2),e.Q6J("ngIf",t.desc_status)}}function Pe(n,g){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Ze,12,10,"ion-item",50),e.qZA()),2&n){const t=g.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.fullName.toUpperCase().charAt(0)==i)}}function Ae(n,g){if(1&n&&(e.TgZ(0,"ion-item-group"),e.TgZ(1,"ion-item-divider",49),e.TgZ(2,"ion-label"),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,Pe,2,1,"div",19),e.qZA()),2&n){const t=g.$implicit,i=e.oxw();e.xp6(3),e.Oqu(t),e.xp6(1),e.Q6J("ngForOf",i.peopleData)}}function Oe(n,g){1&n&&e._UZ(0,"div",53)}const L="SESSION",V="MESSAGE_DATA_",v="PEOPLE_DATA_",y="MESSAGE_DETAIL_DATA_",P="MESSAGE_DETAIL_DATA_SENDLOOP",O=T.tP.Documents,A="holla-messenger",Y="holla-audio",B="holla-photo",Ee=[{path:"",component:(()=>{class n{constructor(t,i,a,o,s,l,m,h,p,d,u,r,c,_,I,M){this.config=t,this.localStorageService=i,this.generalFunctions=a,this.modalCtrl=o,this.routerOutlet=s,this.navCtrl=l,this.router=m,this.route=h,this.zone=p,this.cdref=d,this.platform=u,this.dataConfig=r,this.backgroundMode=c,this.vibration=_,this.AppCacheData=I,this.alertController=M,this.searchMessageList=new Q.NI(""),this.segmentView="chats",this.cacheDataMessageDetail=[],this.messageData=[],this.peopleData=[],this.serverstatus="connecting",this.activeitems=0,this.sendsycn=!1,this.folderContent=[],this.currentFolder="",this.copyFile=null,this.isOnline="offline",this.chatDizayn={name:"",image:"",visebled:!1},this.chatDizaynColor={name:"",image:"",visebled:!1},this.serveractivestats=!1,this.retyconnets=!0}realSetTimeNextyx(t){var i=new Date;return i.setMinutes(i.getMinutes()+t),i.toLocaleTimeString(),i.toLocaleString(),Math.round(i.getTime()/1e3)}webRtcConnet(){return(0,D.mG)(this,void 0,void 0,function*(){const t=yield ne.getStatus();if(console.log("Network status:",t),!this.connection&&t.connected){if(this.connection=new(X()),this.connection.enableLogs=!1,this.connection.enableFileSharing=!0,this.connection.socketURL=this.socketurl,this.connection.session={data:!0},this.connection.autoSaveToDisk=!1,this.userData.photo)var i=this.userData.photo;else i="none";if("pwa"==this.userData.logintype){var a=this.userData.logintype+"+";this.ltypeis="pwa"}else a="",this.ltypeis="mobile";this.connection.extra={userid:this.userData.userid,fullName:this.userData.name,email:this.userData.email,password:this.userData.password,logintype:this.userData.logintype,photo:"none",desc_status:this.userData.desc_status,last_time:this.AppCacheData.realNowSetTime()},this.connection.onReConnecting=s=>{console.info("ReConnecting with",s.userid,"...")},this.connection.onUserIdAlreadyTaken=(s,l)=>{console.log("Userid already taken.",s,"Your new userid:",l)},this.connection.onstream=s=>{},this.onMessage(),this.connection.onopen=s=>{},this.connection.onUserStatusChanged=s=>{s.userid=s.userid.replace("pwa+","");var l=s.userid.replace("pwa+",""),m=s.status;let h=document.getElementById("isonly"+l);h&&(h.style.display="offline"==m?"none":"block");let p=document.getElementById("xisonly"+l);p&&(p.style.display="offline"==m?"none":"block");var d=this.localStorageService.getItem(v+this.userData.userid),u=d.findIndex(c=>c.userid==l);if(d[u]){d[u].isOnly=m;var r=this.connection.getExtraData(l);if(l==r.userid){if(r.fullName!=d[u].fullName){let c=document.getElementById("messagename"+l);c&&(c.innerText=r.fullName);let _=document.getElementById("messagename2"+l);_&&(_.innerText=r.fullName);let I=document.getElementById("mesdatiname"+l);I&&(I.innerText=r.fullName),d[u].fullName=r.fullName}if(r.desc_status!=d[u].desc_status){let c=document.getElementById("messagedesc"+l);c&&(c.innerText=r.desc_status);let _=document.getElementById("messagedesc2"+l);_&&(_.innerText=r.desc_status),d[u].desc_status=r.desc_status}if(r.photo!=d[u].photo){if("none"!=r.photo&&r.photo){let c=document.getElementById("messagephoto"+l);c&&(c.src=r.photo);let _=document.getElementById("messagephotos"+l);_&&(_.src=r.photo);let I=document.getElementById("messagephoto2"+l);I&&(I.src=r.photo);let M=document.getElementById("messagephotos2"+l);M&&(M.src=r.photo);let x=document.getElementById("mesdatiphoto"+l);x&&(x.src=r.photo);let Z=document.getElementById("mesdatiphotoo"+l);Z&&(Z.src=r.photo)}d[u].photo=r.photo}r.last_time!=d[u].last_time&&(d[u].last_time=r.last_time),this.localStorageService.setItem(v+this.userData.userid,d)}}"pwa"==this.userData.logintype&&l==this.userData.userid&&("offline"==m?this.pwamobilstatus||(this.pwamobilstatus=!0,this.localStorageService.setItem("pwamobilestatus"+this.userData.userid,!0),console.log("Mobil Cihaz\u0131n\u0131z\u0131n Aktif Olmas\u0131 Gerekir"),this.modal&&(this.modal.dismiss({data:!0}),this.modal=null),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null)):this.pwamobilstatus&&(this.pwamobilstatus=!1,this.localStorageService.setItem("pwamobilestatus"+this.userData.userid,!1),console.log("Mobil Cihaz\u0131n\u0131z Aktif")))},this.connection.onleave=s=>{this.connection.extra.status="offline",this.connection.updateExtraData()},this.connection.streamended=s=>{},this.connection.onclose=s=>{this.connection.extra.status="offline",this.connection.updateExtraData()},this.connection.password=k()(this.serverpassword);let o=k()(this.serverid);this.connection.userid=a+this.userData.userid,this.connection.openOrJoin(o,(s,l,m,h)=>{h&&(console.log(h),this.serverstatus="connecterror"),!0===s&&(this.retyconnets=!0,this.serverstatus="connect",this.isOnline="online",this.connection.extra.status="online",this.serveractivestats=!0,setTimeout(()=>{this.connection.extra.photo=i,this.connection.extra.status="online",this.connection.updateExtraData(),this.sleep()},1900),"enabled"==this.localStorageService.getItem("loginsycndisable"+this.userData.userid)&&!this.sendsycn&&"pwa"==this.ltypeis&&setTimeout(()=>{console.log("\u0130stek G\xf6nderildi"),this.sycnDataSender()},1e3))})}else console.log("a\u011f hatas\u0131")})}sleepPromise(t){return new Promise(i=>setTimeout(i,t))}sleep(){return(0,D.mG)(this,void 0,void 0,function*(){for(;;)yield this.sleepPromise(2e3),console.log("I have awakend."),this.online()})}tryloginx(){this.pwamobilstatus=!1,this.sendsycn||(this.sendsycn=!0,this.dataInit())}trylogin(){this.connection.closeSocket(),this.connection=null,this.generalFunctions.navCtrlNR("/")}closesSeisons(){setTimeout(()=>{this.connection.closeSocket(),setTimeout(()=>{this.connection=null},200)},1e3),this.pwamobilstatus=!0}time(){var t=new Date,a=(t.getSeconds(),t.getMinutes());return("0"+t.getHours()).substr(-2)+":"+("0"+a).substr(-2)}onMessage(){this.connection.onFileStart=i=>{var a=i.userid,o=i.remoteUserId;if(a==this.userData.userid||o==this.userData.userid){var s;a==this.userData.userid&&(s="me"),o==this.userData.userid&&(s="user");var r,l=this.GenerateSerialNumber("0000-0000000-000-000000-000"),m="online",h=this.connection.getExtraData(a),p=new Date,d=this.generalFunctions.xtranslate("messenger.filesend"),u={id:l,message:d,date:p,type:s,name:h.fullName,avatar:"",clock:this.time(),reciveruserid:o,senderid:a,ctype:m,g_type:"files",files:i,filetype:i.type,filetypemin:i.type.split("/")[0],filestatus:"start",fileuuid:i.uuid,fileurl:"",progressmax:i.maxChunks};"me"==s&&(r=o),"user"==s&&(r=a),this.localStorageService.setItem(P+this.userData.userid+r,u),this.localStorageService.getItem(y+r)||this.localStorageService.setItem(y+r,[]),this.cacheDataMessageDetail=this.localStorageService.getItem(y+r),l=this.GenerateSerialNumber("0000-0000000-000-000000-000"),this.cacheDataMessageDetail.push({id:l,message:this.generalFunctions.xtranslate("messenger.filesend"),date:p,type:s,name:h.fullName,avatar:"",clock:this.time(),reciveruserid:o,senderid:a,ctype:m,g_type:"files",files:i,filetype:i.type,filetypemin:i.type.split("/")[0],filestatus:"start",fileuuid:i.uuid,fileurl:"",progressmax:i.maxChunks}),this.localStorageService.setItem(y+r,this.cacheDataMessageDetail);var c=this.localStorageService.getItem(v+this.userData.userid),_=c.findIndex(Z=>Z.userid==r);if(c[_])c[_].date=p,c[_].message=d,"user"==s&&(c[_].messageLook=!0);else{var I={fullName:h.fullName,photo:h.photo,userid:h.userid,desc_status:h.desc_status,isOnly:h.status,date:p,message:d,messageLook:!0};c.push(I),this.messageData.push(I)}let M=document.getElementById("messagecontes"+r);M&&(M.innerText=d);let x=document.getElementById("messageLooks"+r);x&&"user"==s&&(x.style.display="block"),this.localStorageService.setItem(v+this.userData.userid,c)}};var t=0;this.connection.onFileProgress=i=>{var s,a=i.userid,o=i.remoteUserId;(a==this.userData.userid||o==this.userData.userid)&&++t>50&&(a==this.userData.userid&&(s="me"),o==this.userData.userid&&(s="user"),"me"==s&&(a=o),this.localStorageService.setItem(P+this.userData.userid+a,{uuid:i.uuid,chunk:i,g_type:"filepross",reciveruserid:i.remoteUserId,senderid:i.userid}))},this.connection.onFileEnd=i=>{t=0,setTimeout(()=>{var a=i.userid,o=i.remoteUserId;if(a==this.userData.userid||o==this.userData.userid){var s,l;a==this.userData.userid&&(s="me"),o==this.userData.userid&&(s="user"),"me"==s&&(l=o),"user"==s&&(l=a);var m=i.uuid,h=this.localStorageService.getItem(y+l),p=h.findIndex(_=>_.fileuuid==m);h[p]&&(h[p].filestatus="end",h[p].fileurl=i.url,this.localStorageService.setItem(y+l,h));var d=this.GenerateSerialNumber("0000-0000000-000-000000-000"),r=this.connection.getExtraData(a),c={id:d,message:this.generalFunctions.xtranslate("messenger.filesend"),date:new Date,type:"user",name:r.fullName,avatar:"",clock:this.time(),reciveruserid:o,senderid:a,ctype:"online",g_type:"filesend",files:i,filestatus:"end",fileuuid:i.uuid,fileurl:i.url};this.localStorageService.setItem(P+this.userData.userid+l,c)}},50)},this.connection.onmessage=i=>{if(this.pwamobilesendsycn(i),"pwa_login_control"==i.data.g_type&&i.data.remail==this.userData.email){var a=this.userData.email,o=this.userData.password,s=k()(this.pwamobile_encryption_token),l=o,m=this.encryptionLi(s,a,"encrypting"),h=this.encryptionLi(s,l+m,"encrypting");i.data.token==h&&this.opensessionchecks({remail:a,email:m,passcrpyt:l,token:h,g_type:"pwa_login_session",inuserdata:this.userData,devices:i.data.devices})}if(i.data.reciveruserid==this.userData.userid&&("writer"==i.data.g_type&&this.localStorageService.setItem(P+this.userData.userid+i.data.senderid,i),("audio"==i.data.g_type||"photo"==i.data.g_type)&&this.allmedias(i),"message"==i.data.g_type)){this.localStorageService.setItem(P+this.userData.userid+i.data.senderid,i),i.userid=i.userid.replace("pwa+",""),s=k()(this.user_encryption_token+i.userid+this.userData.userid);var d=this.encryptionLi(s,i.data.message,"decrypting");this.localStorageService.getItem(y+i.data.senderid)||this.localStorageService.setItem(y+i.data.senderid,[]),this.cacheDataMessageDetail=this.localStorageService.getItem(y+i.data.senderid);var u=this.GenerateSerialNumber("0000-0000000-000-000000-000"),c=new Date,x=c.getDate()+"."+c.getMonth()+"."+c.getFullYear(),Z=this.localStorageService.getItem(y+i.data.senderid),C=Z.findIndex(N=>N.newdata==x);this.cacheDataMessageDetail.push({id:u,message:d,date:i.data.date,type:"user",name:i.extra.fullName,avatar:"",clock:i.data.clock,reciveruserid:i.data.reciveruserid,senderid:i.data.senderid,ctype:i.data.ctype,g_type:i.data.g_type,newdata:Z[C]?"":x}),this.localStorageService.setItem(y+i.data.senderid,this.cacheDataMessageDetail);var w=this.localStorageService.getItem(v+this.userData.userid),b=this.messageData,F=(new Date).getTime(),E=(C=w.findIndex(N=>N.userid==i.data.senderid),b.findIndex(N=>N.userid==i.data.senderid));if(w[C]?(w[C].date=i.data.date,w[C].message=d,w[C].messageLook=!0,w[C].timestamp=F):w.unshift({fullName:i.extra.fullName,photo:i.extra.photo,userid:i.extra.userid,desc_status:i.extra.desc_status,isOnly:i.extra.status,date:i.data.date,timestamp:F,message:d,messageLook:!0}),w[C]&&b[E]){b[E].date=i.data.date,b[E].message=d,b[E].messageLook=!0,b[E].timestamp=F;let N="date";this.messageData.sort((Ge,Fe)=>(Fe[N]||"").toString().localeCompare((Ge[N]||"").toString()))}else this.messageData.unshift({fullName:i.extra.fullName,photo:i.extra.photo,userid:i.extra.userid,desc_status:i.extra.desc_status,isOnly:i.extra.status,date:i.data.date,timestamp:F,message:d,messageLook:!0});let J=document.getElementById("messagecontes"+i.data.senderid);J&&(J.innerText=d);let W=document.getElementById("messageLooks"+i.data.senderid);W&&(W.style.display="block"),this.localStorageService.setItem(v+this.userData.userid,w)}}}allmedias(t){return(0,D.mG)(this,void 0,void 0,function*(){if("audio"==t.data.g_type||"photo"==t.data.g_type){t.userid=t.userid.replace("pwa+","");var i=t.data.message;this.localStorageService.getItem(y+t.data.senderid)||this.localStorageService.setItem(y+t.data.senderid,[]),this.cacheDataMessageDetail=this.localStorageService.getItem(y+t.data.senderid);var o,a=this.GenerateSerialNumber("0000-0000000-000-000000-000"),s=new Date,p=s.getDate()+"."+s.getMonth()+"."+s.getFullYear(),d=this.localStorageService.getItem(y+t.data.senderid),u=d.findIndex(b=>b.newdata==p);o=d[u]?"":p;var r=k()(this.user_encryption_token+t.userid+this.userData.userid);if("audio"==t.data.g_type){var c="audio_"+this.GenerateSerialNumber("0000-0000000-000-000000-000-0000000")+".dataV3",_=this.encryptionLi(r,t.data.audio,"decrypting");yield this.writeSecretFileAudio(c,_);var I=c;t.data.audio=c}if("photo"==t.data.g_type){c="photo_"+this.GenerateSerialNumber("0000-0000000-000-000000-000-0000000")+".dataV3",_=this.encryptionLi(r,t.data.photo,"decrypting"),yield this.writeSecretFilePhoto(c,_);var M=c;t.data.photo=c}this.cacheDataMessageDetail.push({id:a,message:i,date:t.data.date,type:"user",name:t.extra.fullName,avatar:"",clock:t.data.clock,reciveruserid:t.data.reciveruserid,senderid:t.data.senderid,ctype:t.data.ctype,g_type:t.data.g_type,audio:I,audiomintype:t.data.audiomintype,audioduration:t.data.audioduration,photo:M,photoaudiotype:t.data.photoaudiotype,newdata:o,tumbimages:t.data.tumbimages}),this.localStorageService.setItem(y+t.data.senderid,this.cacheDataMessageDetail);var x=this.localStorageService.getItem(v+this.userData.userid);if(u=x.findIndex(b=>b.userid==t.data.senderid),x[u])x[u].date=t.data.date,x[u].message=i,x[u].messageLook=!0;else{var Z={fullName:t.extra.fullName,photo:t.extra.photo,userid:t.extra.userid,desc_status:t.extra.desc_status,isOnly:t.extra.status,date:t.data.date,message:i,messageLook:!0};x.push(Z),this.messageData.push(Z)}let C=document.getElementById("messagecontes"+t.data.senderid);C&&(C.innerText=i);let w=document.getElementById("messageLooks"+t.data.senderid);w&&(w.style.display="block"),this.localStorageService.setItem(v+this.userData.userid,x),this.localStorageService.setItem(P+this.userData.userid+t.data.senderid,t)}})}pwamobilesendsycn(t){return(0,D.mG)(this,void 0,void 0,function*(){if("normal_text_send"==t.data.g_type&&t.data.token==this.userData.userid){var i=k()("normal_text_send:"+this.userData.userid);t.data.indata.message=this.encryptionLi(i,t.data.indata.message,"decrypting"),this.localStorageService.setItem(P+this.userData.userid+t.data.indata.reciveruserid,t),this.localStorageService.getItem(y+t.data.indata.reciveruserid)||this.localStorageService.setItem(y+t.data.indata.reciveruserid,[]),this.cacheDataMessageDetail=this.localStorageService.getItem(y+t.data.indata.reciveruserid),this.cacheDataMessageDetail.push(t.data.indata),this.localStorageService.setItem(y+t.data.indata.reciveruserid,this.cacheDataMessageDetail);var o=(a=this.localStorageService.getItem(v+this.userData.userid)).findIndex(U=>U.userid==t.data.indata.reciveruserid);a[o]&&(a[o].date=t.data.indata.date,a[o].message=t.data.indata.message,a[o].messageLook=!1);let b=document.getElementById("messagecontes"+t.data.indata.reciveruserid);b&&(b.innerText=t.data.indata.message),this.localStorageService.setItem(v+this.userData.userid,a)}if("all_media_send"==t.data.g_type&&t.data.token==this.userData.userid){var a;i=k()("all_media_send:"+this.userData.userid),t.data.indata.tumbimages=this.encryptionLi(i,t.data.indata.tumbimages,"decrypting"),this.localStorageService.setItem(P+this.userData.userid+t.data.indata.reciveruserid,t),this.localStorageService.getItem(y+t.data.indata.reciveruserid)||this.localStorageService.setItem(y+t.data.indata.reciveruserid,[]),this.cacheDataMessageDetail=this.localStorageService.getItem(y+t.data.indata.reciveruserid),this.cacheDataMessageDetail.push(t.data.indata),this.localStorageService.setItem(y+t.data.indata.reciveruserid,this.cacheDataMessageDetail),o=(a=this.localStorageService.getItem(v+this.userData.userid)).findIndex(z=>z.userid==t.data.indata.reciveruserid),a[o]&&(a[o].date=t.data.indata.date,a[o].message=t.data.indata.message,a[o].messageLook=!1);let E=document.getElementById("messagecontes"+t.data.indata.reciveruserid);E&&(E.innerText=t.data.indata.message),this.localStorageService.setItem(v+this.userData.userid,a)}if("user_settings_update"==t.data.g_type&&t.data.token==this.userData.userid&&(t.data.indata[0].logintype=this.userData.logintype,this.localStorageService.setItem(L,t.data.indata),this.userData=this.localStorageService.getItem(L)[0],this.userphotos=this.userData.photo,this.connection.extra.fullName=this.userData.name,this.connection.extra.desc_status=this.userData.desc_status,this.connection.extra.photo=this.userData.photo,this.connection.updateExtraData(),this.chatDizayn=this.userData.chatDizayn,this.chatDizaynColor=this.userData.chatDizaynColor),"open_message_look"==t.data.g_type&&t.data.token==this.userData.userid){let b=document.getElementById("messageLooks"+t.data.indata.userid);b&&(b.style.display="none")}if("send_media"==t.data.g_type&&t.data.token==this.userData.userid){var l=(s=t.data.indata).vdata,m=(i=k()("get_media_crpto:"+this.userData.userid),this.encryptionLi(i,l,"decrypting"));"get_photo"==s.type&&(yield this.writeSecretFilePhoto(s.name,m)),"get_audio"==s.type&&(yield this.writeSecretFileAudio(s.name,m)),this.localStorageService.setItem(P+this.userData.userid+s.reciveruserid,t)}if("get_media"==t.data.g_type&&t.data.token==this.userData.userid){let U;"get_photo"==(s=t.data.indata).type&&(U=yield this.readSecretFilePhotoPwa(s.name)),"get_audio"==s.type&&(U=yield this.readSecretFileAudioPwa(s.name)),i=k()("get_media_crpto:"+this.userData.userid);var h=this.encryptionLi(i,U,"encrypting");if("pwa"==this.userData.logintype)var p="pwa";else p="mobile";this.connection.send({token:this.userData.userid,g_type:"send_media",local:p,indata:{name:s.name,type:s.type,vdata:h,reciveruserid:s.reciveruserid}})}if("addpeople"==t.data.g_type&&t.data.token==this.userData.userid){var s=t.data.indata,r=this.localStorageService.getItem(v+this.userData.userid);r.length?(o=r.findIndex(F=>F.userid==s.userid),r[o]||(r.push(s),this.localStorageService.setItem(v+this.userData.userid,r),this.forceReloadData("people"))):(r.push(s),this.localStorageService.setItem(v+this.userData.userid,r),this.forceReloadData("people"))}if("pwa_login_control_sycn"==t.data.g_type&&t.data.remail==this.userData.email){console.log("istek al\u0131nd\u0131 haz\u0131rlan\u0131yor");var c=this.userData.email,_=this.userData.password,I=(i=k()(this.pwamobile_encryption_token),_),M=this.encryptionLi(i,c,"encrypting"),x=this.encryptionLi(i,I+M,"encrypting");t.data.token==x&&setTimeout(()=>{this.sycnGetData(t)},100)}if("pwa_login_session"==t.data.g_type&&t.data.remail==this.userData.email&&(console.log("veriler haz\u0131rlan\u0131yor"),c=this.userData.email,_=this.userData.password,i=k()(this.pwamobile_encryption_token),I=_,M=this.encryptionLi(i,c,"encrypting"),x=this.encryptionLi(i,I+M,"encrypting"),t.data.token==x&&"pwa_login_session"==t.data.g_type)){var w=t.data.allmessage;this.localStorageService.setItem(v+t.data.inuserdata.userid,t.data.inpeopledata);for(let J of w)this.localStorageService.setItem(y+J.userid,J.data);t.data.inuserdata.logintype="pwa",this.localStorageService.setItem(L,[t.data.inuserdata]),this.sendsycn=!0,this.dataInit()}})}sycnDataSender(){var t=this.userData.email,i=this.userData.password,a=k()(this.pwamobile_encryption_token),o=i,s=this.encryptionLi(a,t,"encrypting"),l=this.encryptionLi(a,o+s,"encrypting");this.connection.send({remail:t,email:s,passcrpyt:o,token:l,g_type:"pwa_login_control_sycn"})}sycnGetData(t){return(0,D.mG)(this,void 0,void 0,function*(){console.log("Dosyalar Haz\u0131rlan\u0131yor");var i=[];for(let r of this.localStorageService.getItem(v+this.userData.userid)){var a=this.localStorageService.getItem(y+r.userid);a&&i.push({userid:r.userid,data:a})}var s=this.userData.email,l=this.userData.password,m=k()(this.pwamobile_encryption_token),h=l,p=this.encryptionLi(m,s,"encrypting"),u={remail:s,email:p,passcrpyt:h,token:this.encryptionLi(m,h+p,"encrypting"),g_type:"pwa_login_session",inuserdata:this.localStorageService.getItem(L)[0],inpeopledata:this.localStorageService.getItem(v+this.userData.userid),allmessage:i};yield setTimeout(()=>{console.log("Dosyalar Haz\u0131rland\u0131 G\xf6nderildi"),this.connection.send(u)},250)})}opensessionchecks(t){return(0,D.mG)(this,void 0,void 0,function*(){var a=G.LT,o=G.MD,s=this.routerOutlet.nativeEl,l=yield this.modalCtrl.create({component:te.MH,componentProps:{data:t,connection:this.connection},mode:"ios",cssClass:"modal-show-black-drop session-modal-show-black-drop nomusiccontrols",swipeToClose:!0,showBackdrop:!0,backdropDismiss:!0,enterAnimation:a,leaveAnimation:o,presentingElement:s});l.onDidDismiss().then(m=>{l=null}),yield l.present()})}closeSocket(){this.connection&&(this.connection.extra.status="offline",this.connection.updateExtraData(),setTimeout(()=>{this.connection.disconnectWith(this.connection.userid),setTimeout(()=>{this.connection.closeSocket(),this.connection=""},200)},100))}offline(){this.connection.extra.status="offline",this.connection.updateExtraData()}online(){var t;this.connection||(this.webRtcConnet(),this.timeObjectCacLOG=this.realSetTimeNextyx(4)),this.connection&&(this.serveractivestats=this.connection.isOnline,!0===this.connection.isOnline?(t="online",this.isOnline="online"):(t="offline",this.isOnline="offline",this.closeSocket(),this.modal&&(this.modal.dismiss({data:!0}),this.modal=null),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null)),this.connection.extra.last_time=this.AppCacheData.realNowSetTime(),this.connection.extra.status=t,this.connection.updateExtraData())}appClosedEvenet(){this.connection.extra.status="offline",this.connection.updateExtraData(),setTimeout(()=>{},100)}isOnly(){}openSettings(){return(0,D.mG)(this,void 0,void 0,function*(){var t,i,a,o;if(this.platform.is("mobile")?(t="modal-show-black-drop max-modal-show-black-drop nomusiccontrols",i=G.LT,a=G.MD,o=this.routerOutlet.nativeEl):(t="pcandwebdesig nomusiccontrols",i="",a="",o=";"),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),!this.modal3)return this.modal3=yield this.modalCtrl.create({component:se.NF,componentProps:{connection:this.connection},mode:"ios",cssClass:t,swipeToClose:!0,showBackdrop:!0,backdropDismiss:!0,enterAnimation:i,leaveAnimation:a,presentingElement:o}),this.modal3.onDidDismiss().then(s=>{this.modal3=null,this.userData=this.localStorageService.getItem(L)[0],this.chatDizayn=this.userData.chatDizayn,this.chatDizaynColor=this.userData.chatDizaynColor}),yield this.modal3.present();this.modal3.dismiss({data:!0}),this.modal3=null})}openFinds(){return(0,D.mG)(this,void 0,void 0,function*(){var t,i,a,o;if(this.platform.is("mobile")?(t="modal-show-black-drop max-modal-show-black-drop nomusiccontrols",i=G.LT,a=G.MD,o=this.routerOutlet.nativeEl):(t="pcandwebdesig nomusiccontrols",i="",a="",o=";"),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null),!this.modal2)return this.modal2=yield this.modalCtrl.create({component:ee.EL,componentProps:{connection:this.connection},mode:"ios",cssClass:t,swipeToClose:!0,showBackdrop:!0,backdropDismiss:!0,enterAnimation:i,leaveAnimation:a,presentingElement:o}),this.modal2.onDidDismiss().then(s=>{this.modal2=null,"people"==this.segmentView&&this.forceReloadData("people")}),yield this.modal2.present();this.modal2.dismiss({data:!0}),this.modal2=null})}messageDetail(t){return(0,D.mG)(this,void 0,void 0,function*(){if(this.activeitems!=t.userid){var i=this.localStorageService.getItem(v+this.userData.userid),a=i.findIndex(u=>u.userid==t.userid);let p=document.getElementById("isonly"+t.userid);p&&(i[a].isOnly="block"==p.style.display?"online":"offline");let d=document.getElementById("xisonly"+t.userid);var o,s,l;if(d&&(i[a].isOnly="block"==d.style.display?"online":"offline"),this.localStorageService.setItem(v+this.userData.userid,i),this.platform.is("mobile")?(o="",s=!0,l=""):(o="pcandwebdesig ",s=!1,l="messagedetailmodals"),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),this.modal&&(this.activeitems=0,this.modal.dismiss({data:!0}),this.modal=null),this.activeitems=t.userid,"pwa"==this.userData.logintype)var m="pwa";else m="mobile";return this.connection.send({token:this.userData.userid,g_type:"open_message_look",local:m,indata:i[a]}),this.modal=yield this.modalCtrl.create({component:ae.PX,componentProps:{items:i[a],userid:t.userid,connection:this.connection},mode:"ios",cssClass:o,id:l,swipeToClose:!1,showBackdrop:s,backdropDismiss:s}),this.modal.onDidDismiss().then(u=>{if(this.activeitems=0,t){t.messageLook=!1,this.localStorageService.getItem("cacheitem")&&(t.message=this.localStorageService.getItem("cacheitem"));let r=document.getElementById("messagecontes"+t.userid);r&&this.localStorageService.getItem("cacheitem")&&(r.innerText=this.localStorageService.getItem("cacheitem"));let c=document.getElementById("messageLooks"+t.userid);c&&(c.style.display="none"),this.localStorageService.removeItem("cacheitem"),setTimeout(()=>{this.localStorageService.removeItem("cacheitem"),this.localStorageService.removeItem(P+this.userData.userid+t.userid)},300),this.localStorageService.removeItem(P+this.userData.userid+t.userid),t=""}this.messageData||this.forceReloadData("chats")}),yield setTimeout(()=>{this.activeitems=t.userid},600),yield this.modal.present()}})}deletechats(t){return(0,D.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.generalFunctions.xtranslate("general.logoutinfo"),message:this.generalFunctions.xtranslate("messenger.deletechatsin"),buttons:[{text:this.generalFunctions.xtranslate("general.cancel"),role:"cancel",cssClass:"secondary",handler:a=>{}},{text:this.generalFunctions.xtranslate("general.okay"),handler:()=>{var a=this.localStorageService.getItem(v+this.userData.userid),o=a.findIndex(l=>l.userid==t.userid);a[o]&&(a[o].message="",a[o].messageLook=!1,this.localStorageService.setItem(v+this.userData.userid,a)),this.localStorageService.removeItem(y+t.userid);let s=this.messageData.indexOf(t);s>-1&&this.messageData.splice(s,1)}}]})).present()})}doRefresh(t){this.dataInit(),setTimeout(()=>{t.target.complete()},1e3)}dataInit(){return(0,D.mG)(this,void 0,void 0,function*(){this.localStorageService.getItem(V+this.userData.userid)||this.localStorageService.setItem(V+this.userData.userid,[]),this.localStorageService.getItem(v+this.userData.userid)||this.localStorageService.setItem(v+this.userData.userid,[]),this.changeTabs("chats")})}changeTabs(t){if("chats"==t&&!this.messageData.length){this.messageData=[];var i=this.localStorageService.getItem(v+this.userData.userid);let o="date";i.sort((s,l)=>(l[o]||"").toString().localeCompare((s[o]||"").toString())),this.messageData=i}if("people"==t&&!this.peopleData.length){this.peopleData=[];var a=this.localStorageService.getItem(v+this.userData.userid);let o="fullName";a.sort((s,l)=>(s[o]||"").toString().localeCompare((l[o]||"").toString())),this.peopleData=a}}forceReloadData(t){if("chats"==t){this.messageData=[];var i=this.localStorageService.getItem(v+this.userData.userid);this.messageData=i}if("people"==t){this.peopleData=[];var a=this.localStorageService.getItem(v+this.userData.userid);let o="fullName";a.sort((s,l)=>(s[o]||"").toString().localeCompare((l[o]||"").toString())),this.peopleData=a}}ionViewDidEnter(){this.viewActive=!0}ionViewDidLeave(){this.viewActive=!1}loadDocuments(){return(0,D.mG)(this,void 0,void 0,function*(){const t=yield T.fy.readdir({directory:O,path:A+"/"+Y});console.log(t),this.folderContent=t.files.map(i=>({name:i,isFile:i.includes(".")})),console.log(this.folderContent)})}createDir(t){return(0,D.mG)(this,void 0,void 0,function*(){try{let i=yield T.fy.mkdir({directory:O,path:t,recursive:!0});console.log("folder ",i)}catch(i){}})}writeSecretFilePhoto(t,i){return(0,D.mG)(this,void 0,void 0,function*(){yield T.fy.writeFile({path:A+"/"+B+"/"+t,data:i,directory:O,encoding:T.ez.UTF8})})}readSecretFilePhoto(t){return(0,D.mG)(this,void 0,void 0,function*(){try{let i=yield T.fy.readFile({path:A+"/"+B+"/"+t.photo,directory:O,encoding:T.ez.UTF8});t.dresult=i.data}catch(i){console.log("Unable to make directory",i),t.notavibled=!0}})}readSecretFilePhotoPwa(t){return(0,D.mG)(this,void 0,void 0,function*(){try{return(yield T.fy.readFile({path:A+"/"+B+"/"+t,directory:O,encoding:T.ez.UTF8})).data}catch(i){return!1}})}readSecretFileAudioPwa(t){return(0,D.mG)(this,void 0,void 0,function*(){try{return(yield T.fy.readFile({path:A+"/"+Y+"/"+t,directory:O,encoding:T.ez.UTF8})).data}catch(i){return!1}})}writeSecretFileAudio(t,i){return(0,D.mG)(this,void 0,void 0,function*(){yield T.fy.writeFile({path:A+"/"+Y+"/"+t,data:i,directory:O,encoding:T.ez.UTF8})})}readSecretFileAudio(t){return(0,D.mG)(this,void 0,void 0,function*(){try{let i=yield T.fy.readFile({path:A+"/"+Y+"/"+t.audio,directory:O,encoding:T.ez.UTF8});t.dresult=i.data}catch(i){console.log("Unable to make directory",i),t.notavibled=!0}})}retryconn(){return(0,D.mG)(this,void 0,void 0,function*(){this.connection&&(this.serverstatus="connecting",this.serveractivestats=!1,this.isOnline="offline",this.closeSocket(),this.modal&&(this.modal.dismiss({data:!0}),this.modal=null),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null)),setTimeout(()=>{this.connection||this.webRtcConnet()},500)})}backgrounmodes(){return(0,D.mG)(this,void 0,void 0,function*(){var t,i,a;if(!this.modalBackground)return this.platform.is("mobile")?(t="backgrounmode",i=!0,a="backgrounmode"):(t="pcandwebdesig backgrounmode",i=!1,a="backgrounmode"),this.modalBackground=yield this.modalCtrl.create({component:ie.nW,componentProps:{connection:this.connection},mode:"ios",cssClass:t,id:a,swipeToClose:!1,showBackdrop:i,backdropDismiss:i}),this.modalBackground.onDidDismiss().then(o=>{}),yield this.modalBackground.present();this.modalBackground.dismiss({data:!0}),this.modalBackground=null})}ngOnInit(){return(0,D.mG)(this,void 0,void 0,function*(){const t=Array.from(Array(26)).map((a,o)=>o+65);this.alphabet=t.map(a=>String.fromCharCode(a)),this.alphabet.push("?"),yield setTimeout(()=>{this.platform.pause.subscribe(()=>(0,D.mG)(this,void 0,void 0,function*(){this.timeObjectCacLOG=this.realSetTimeNextyx(4)})),this.platform.resume.subscribe(()=>(0,D.mG)(this,void 0,void 0,function*(){this.AppCacheData.realNowSetTime()>=this.timeObjectCacLOG&&(this.vibration.vibrate(300),this.retryconn())}))},1e3),yield this.dataConfig.getConf().then(a=>{this.appversion=a.version,this.socketurl=a.socketurl,this.serverid=a.server_id,this.serverpassword=a.server_password,this.pwamobile_encryption_token=a.pwamobile_encryption_token,this.user_encryption_token=a.user_encryption_token}),yield this.createDir(A),yield setTimeout(()=>{this.createDir(A+"/"+Y),this.createDir(A+"/"+B)},100),this.localStorageService.getItem(L)?(this.userData=this.localStorageService.getItem(L)[0],this.userphotos=this.userData.photo,this.uuuserid=this.userData.userid,this.chatDizayn=this.userData.chatDizayn,this.chatDizaynColor=this.userData.chatDizaynColor,this.pwamobilstatus=this.localStorageService.getItem("pwamobilestatus"+this.userData.userid),this.webRtcConnet(),setTimeout(()=>{"mobile"==this.ltypeis&&this.dataInit(),"pwa"==this.ltypeis&&"disabled"==this.localStorageService.getItem("loginsycndisable"+this.userData.userid)&&(this.sendsycn=!0,this.dataInit(),this.localStorageService.setItem("loginsycndisable"+this.userData.userid,"enabled"))},500)):this.generalFunctions.navCtrlNR("/auth/login"),window.addEventListener("beforeunload",()=>{this.appClosedEvenet()})})}encryptionLi(t,i,a){if("encrypting"==a)return((m,h)=>{const p=r=>r.split("").map(c=>c.charCodeAt(0));return h.split("").map(p).map(r=>p(m).reduce((c,_)=>c^_,r)).map(r=>("0"+Number(r).toString(16)).substr(-2)).join("")})(t,btoa(unescape(encodeURIComponent(i))));if("decrypting"==a){const m=((m,h)=>h.match(/.{1,2}/g).map(u=>parseInt(u,16)).map(u=>(u=>u.split("").map(r=>r.charCodeAt(0)))(m).reduce((r,c)=>r^c,u)).map(u=>String.fromCharCode(u)).join(""))(t,i);return decodeURIComponent(escape(window.atob(m)))}}GenerateRandomNumber(t,i){return Math.floor(Math.random()*(i-t+1))+t}GenerateRandomChar(){var t="1234567890AaBbCcDdEeFfGgIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz";return t[this.GenerateRandomNumber(0,t.length-1)]}GenerateSerialNumber(t){var i="";if(null!=t)for(var a=0;a<t.length;a++){var o=t[a];i+="0"==o?this.GenerateRandomChar():o}return i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.De),e.Y36($.n),e.Y36(re.f),e.Y36(S.IN),e.Y36(S.jP),e.Y36(S.SH),e.Y36(R.F0),e.Y36(R.gz),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(S.t4),e.Y36(le.V),e.Y36(ce.z),e.Y36(de.w),e.Y36(ue),e.Y36(S.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-message"]],hostBindings:function(t,i){1&t&&e.NdJ("resize",function(){return i.connection()},!1,e.Jf7)},decls:38,vars:31,consts:[[1,"newbackgrouds"],[1,"newbackgroudsimg"],["class","pwamobileonlies",4,"ngIf"],["mode","ios",1,"ion-no-border",3,"translucent"],["mode","ios"],["slot","start",3,"click"],["class","avatar-sm ion-margin-start",4,"ngIf"],[4,"ngIf"],["slot","end"],["color","dark",1,"yenimesajbtn",3,"click"],["slot","icon-only","name","person-add-outline",2,"margin-right","3px"],["mode","ios",1,"full-width",3,"ngModel","ngModelChange"],["value","chats",3,"click"],["value","calls",2,"display","none",3,"click"],["value","people",3,"click"],["type","indeterminate",4,"ngIf"],[3,"fullscreen"],[1,"chat-list"],[3,"display",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["style","\nposition: fixed;\nz-index: 99;\ntop: 0;\nbottom: 0;\nleft: 0;\nright: 0;\nbackground: rgb(143 143 143 / 11%);\n",4,"ngIf"],[1,"pwamobileonlies"],[1,"newlopwsamob"],["name","phone-portrait-outline"],[2,"max-width","650px"],["color","dark","expand","block","type","button",1,"ion-margin-start","ion-margin-end","ion-margin-bottom",3,"click"],["name","sync-outline"],["color","light","type","indeterminate",2,"width","40%","margin","0 auto","margin-top","35px"],["name","wifi-outline"],[1,"avatar-sm","ion-margin-start"],["src","assets/images/avatars/0.jpg",3,"id",4,"ngIf"],[3,"id","src",4,"ngIf"],["name","ellipse",2,"position","absolute","right","-5px","width","15px","height","15px",3,"color"],["src","assets/images/avatars/0.jpg",3,"id"],[3,"id","src"],["name","wifi-outline",2,"width","0px","height","0px"],["type","indeterminate"],["lines","none","detail","false","button","",1,"chat-item",3,"click"],["slot","start",1,"avatar-md","has-status"],[1,"avatar-status"],[1,"online-status","active",2,"display","none",3,"id"],[1,"chat-name",3,"id"],[1,"chat-description"],["class","content-preview",3,"id",4,"ngIf"],["slot","end",1,"online-status","unread",3,"id"],["side","end",2,"padding-bottom","12px"],["color","danger","expandable","",3,"click"],["slot","start","name","trash-outline"],[1,"content-preview",3,"id"],[2,"margin-bottom","12px"],["button","","class","chat-item","lines","none","detail","false",3,"class","display","click",4,"ngIf"],["button","","lines","none","detail","false",1,"chat-item",3,"click"],["slot","end",1,"online-status","unread"],[2,"position","fixed","z-index","99","top","0","bottom","0","left","0","right","0","background","rgb(143 143 143 / 11%)"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.qZA(),e.YNc(2,me,13,9,"div",2),e.YNc(3,ge,8,3,"div",2),e.YNc(4,pe,11,6,"div",2),e.TgZ(5,"ion-header",3),e.TgZ(6,"ion-toolbar",4),e.TgZ(7,"ion-buttons",5),e.NdJ("click",function(){return i.openSettings()}),e.YNc(8,ve,4,3,"ion-avatar",6),e.qZA(),e.YNc(9,ye,3,3,"ion-title",7),e.YNc(10,Se,4,3,"ion-title",7),e.YNc(11,De,4,3,"ion-title",7),e.TgZ(12,"ion-buttons",8),e.TgZ(13,"ion-button",9),e.NdJ("click",function(){return i.openFinds()}),e._UZ(14,"ion-icon",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"ion-toolbar",4),e.TgZ(16,"ion-segment",11),e.NdJ("ngModelChange",function(o){return i.segmentView=o}),e.TgZ(17,"ion-segment-button",12),e.NdJ("click",function(){return i.changeTabs("chats")}),e.TgZ(18,"ion-label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.TgZ(21,"ion-segment-button",13),e.NdJ("click",function(){return i.changeTabs("calls")}),e.TgZ(22,"ion-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.TgZ(25,"ion-segment-button",14),e.NdJ("click",function(){return i.changeTabs("people")}),e.TgZ(26,"ion-label"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(29,xe,1,0,"ion-progress-bar",15),e.qZA(),e.TgZ(30,"ion-content",16),e.TgZ(31,"div",17),e.TgZ(32,"ion-list"),e.YNc(33,Me,19,16,"ion-item-sliding",18),e.qZA(),e.qZA(),e.TgZ(34,"div",17),e.TgZ(35,"ion-list"),e.YNc(36,Ae,5,2,"ion-item-group",19),e.qZA(),e.qZA(),e.qZA(),e.YNc(37,Oe,1,0,"div",20)),2&t&&(e.Udp("background-color",i.chatDizaynColor.color),e.xp6(1),e.Udp("background-image","url("+i.chatDizayn.image+")"),e.xp6(1),e.Q6J("ngIf",i.pwamobilstatus),e.xp6(1),e.Q6J("ngIf","pwa"==i.ltypeis&&!i.sendsycn&&!i.pwamobilstatus),e.xp6(1),e.Q6J("ngIf","connect"==i.serverstatus&&"offline"==i.isOnline),e.xp6(1),e.Q6J("translucent",!0),e.xp6(3),e.Q6J("ngIf",i.userphotos),e.xp6(1),e.Q6J("ngIf","connect"==i.serverstatus),e.xp6(1),e.Q6J("ngIf","connecting"==i.serverstatus),e.xp6(1),e.Q6J("ngIf","connecterror"==i.serverstatus),e.xp6(5),e.Q6J("ngModel",i.segmentView),e.xp6(3),e.Oqu(e.lcZ(20,25,"messenger.chats")),e.xp6(4),e.Oqu(e.lcZ(24,27,"messenger.calls")),e.xp6(4),e.Oqu(e.lcZ(28,29,"messenger.people")),e.xp6(2),e.Q6J("ngIf","connecting"==i.serverstatus),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(1),e.Udp("transform","chats"==i.segmentView?"none":"translate3d(-800px, -800px, -800px)"),e.xp6(2),e.Q6J("ngForOf",i.messageData),e.xp6(1),e.Udp("transform","people"==i.segmentView?"none":"translate3d(-800px, -800px, -800px)"),e.xp6(2),e.Q6J("ngForOf",i.alphabet),e.xp6(1),e.Q6J("ngIf","connecting"==i.serverstatus))},directives:[q.O5,S.Gu,S.sr,S.Sm,S.YG,S.gu,S.cJ,S.QI,Q.JJ,Q.On,S.GO,S.Q$,S.W2,S.q_,q.sg,S.X7,S.BJ,S.wd,S.td,S.Ie,S.IK,S.u8,S.Ub,S.rH],pipes:[he.X$],styles:[".ion-page[_nghost-%COMP%]{background-color:var(--ion-item-background);--ion-background-color: var(--ion-item-background)}.message-icon-middle[_ngcontent-%COMP%]{vertical-align:middle}.chat-item[_ngcontent-%COMP%]{margin-bottom:12px}.chat-item[_ngcontent-%COMP%]   .chat-description[_ngcontent-%COMP%]{font-size:14px;display:flex}.chat-item[_ngcontent-%COMP%]   .content-preview[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chat-item[_ngcontent-%COMP%]   .time-ago[_ngcontent-%COMP%]{margin-left:4px}.chat-item[_ngcontent-%COMP%]   .online-status.unread[_ngcontent-%COMP%]{display:none}.chat-item.unread[_ngcontent-%COMP%]   .chat-name[_ngcontent-%COMP%]{font-weight:700}.chat-item.unread[_ngcontent-%COMP%]   .chat-description[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:700}.chat-item.unread[_ngcontent-%COMP%]   .online-status.unread[_ngcontent-%COMP%]{display:block}.avatar-stacked[_ngcontent-%COMP%]{position:relative}.avatar-stacked[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:40px;height:40px}.avatar-stacked[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(2){z-index:1;top:14px;right:14px;width:46px;height:46px;border:3px solid #fff}ion-toolbar.sc-ion-searchbar-ios-h[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   .sc-ion-searchbar-ios-h[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:18px;height:55px}ion-avatar.has-status[_ngcontent-%COMP%]{position:relative}ion-avatar.avatar-sm[_ngcontent-%COMP%]{width:33px;height:33px;margin-inline-start:var(--ion-margin, 10px)}ion-avatar.avatar-md[_ngcontent-%COMP%]{width:56px;height:56px}ion-avatar.avatar-lg[_ngcontent-%COMP%]{display:inline-block;width:88px;height:88px}ion-avatar[_ngcontent-%COMP%]   .avatar-status[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}ion-avatar[_ngcontent-%COMP%]   .online-status[_ngcontent-%COMP%]{width:16px;height:16px;border:3px solid #fff}.online-status[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;width:10px;height:10px;border-radius:50%;background-color:var(--ion-color-medium)}.online-status.active[_ngcontent-%COMP%]{background-color:var(--ion-color-success)}.online-status.unread[_ngcontent-%COMP%]{background-color:var(--ion-color-secondary)}.list-header-custom[_ngcontent-%COMP%]{text-transform:uppercase;font-size:12px;letter-spacing:1px;color:var(--ion-color-medium)}ion-item[_ngcontent-%COMP%]{--border-color: var(--ion-color-light)}ion-segment.full-width[_ngcontent-%COMP%]{width:100%;margin:0 8px}.chat-list[_ngcontent-%COMP%]{transform:translate3d(-800px,-800px,-800px);height:0px}.pwamobileonlies[_ngcontent-%COMP%]{position:fixed;z-index:10000000000000002000;width:100%;height:100%;background:rgba(0,0,0,.44);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.pwamobileonlies[_ngcontent-%COMP%]   .newlopwsamob[_ngcontent-%COMP%]{position:fixed;text-align:center;left:0;right:0;margin:0 auto;top:50%;transform:translateY(-50%);z-index:99999}.pwamobileonlies[_ngcontent-%COMP%]   .newlopwsamob[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:84px;height:84px;color:#fff}.pwamobileonlies[_ngcontent-%COMP%]   .newlopwsamob[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:20px;max-width:322px;margin:22px auto 0}.pwamobileonlies[_ngcontent-%COMP%]   .newlopwsamob[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{max-width:200px;margin:30px auto 0}"]}),n})()}];let Ne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[R.Bz.forChild(Ee)],R.Bz]}),n})();var Le=f(4466);let Ue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[q.ez,Ne,Le.m]]}),n})()}}]);